# AI_기능_도입_계획

## 배경/문제
- 현재 스레드/댓글 작성과 정리는 전적으로 수동이며, 품질 평가나 요약/정리 기능이 없다.
- AI 기능 추가 요청이 구체적이나, 흐름/스코프/설정 저장/프롬프트 편집 등 구조가 정리되지 않았다.

## 목표
- 스레드/댓글 단위로 AI 분석을 실행할 수 있고, 사용자가 프롬프트 프리셋을 선택/수정할 수 있다.
- 사용자 설정 페이지에서 API 키를 저장하고 AI 호출에 활용한다.
- 검색 결과/당일 작성 스레드 대상으로 선별 분석 요청이 가능하다.
- “todo에 추가하기” 프리셋을 통해 스레드/댓글의 할 일을 최신 todo 카테고리 스레드에 댓글로 추가한다.

## 범위
- 포함
  - 스레드/댓글에 AI 버튼 추가 및 실행 플로우
  - 스코프 규칙: 스레드 전체(스레드+댓글), 댓글 기준(댓글+대댓글)
  - 프리셋 제공 + 사용자 수정/저장(또는 임시 편집) UX
  - “자연스러운 영어 표현 평가” 프리셋
  - 검색 결과/당일 작성 스레드 선별 분석 요청
  - “todo에 추가하기” 프리셋 및 todo 카테고리 스레드 댓글 생성
  - 설정 페이지 API 키 저장
- 제외(후속 과제)
  - 아이콘 개선, 리팩토링, 개인용 앱 전환
  - AI 인터넷 검색 수집 후 스레드 추가
  - 캘린더 읽기 및 스레드 추가, 캘린더 UI 개선
  - 더블클릭으로 복수 카테고리 선택

## 현재 동작 정리
- 스레드/댓글 UI에는 AI 실행 관련 버튼/플로우가 없다.
- 설정 페이지에서 외부 API 키 저장 기능이 없다(추정).
- todo 카테고리 스레드에 자동 댓글 생성 기능이 없다.

## 개선 방향
- 프롬프트 프리셋은 “기본 제공 + 사용자 수정”을 원칙으로 하되, 초기에는 최소한의 저장 범위로 시작한다.
- AI 호출은 스코프/프리셋/대상 텍스트를 명확히 구성해 서버에서 실행한다.
- todo 추가는 기존 데이터 모델/댓글 작성 플로우를 재사용하고, 자동 생성임을 구분 가능하도록 한다.

## 단계별 계획
- 1단계: 요구사항 정리 및 데이터 모델 확정
  - AI 프리셋 구조(이름/설명/기본 프롬프트/수정 가능 여부) 정의
  - 스코프 규칙 명문화(스레드 vs 댓글)
  - todo 카테고리 스레드 탐색 기준 정의(“가장 최근 생성”)
  - 완료 기준: 스키마/DTO/응답 포맷 확정 문서화
- 2단계: API 키 설정 및 AI 호출 기반 구축
  - 설정 페이지에 API 키 입력/저장/검증 플로우 추가
  - 서버에서 AI 호출 엔드포인트/서비스 구성
  - 완료 기준: 키 저장 및 AI 호출이 정상 작동
- 3단계: 스레드/댓글 AI 버튼 + 프리셋 UX
  - 스레드/댓글 상세에 AI 버튼 배치
  - 프리셋 선택/편집 UI 추가
  - 완료 기준: 선택한 스코프로 AI 실행 가능
- 4단계: 프리셋 기능 확장
  - “자연스러운 영어 표현 평가” 프리셋 추가
  - “todo에 추가하기” 프리셋: 댓글 생성 로직 연결
  - 완료 기준: 프리셋별 결과/액션 확인
- 5단계: 선별 분석 기능
  - 검색 결과/당일 작성 스레드에서 선택 후 분석 요청
  - 완료 기준: 선택된 스레드 묶음에 대한 분석 응답 수신

## 리스크 및 대응
- API 키 보안: 저장 위치/암호화/노출 방지 정책 필요
  - 대응: 서버 측 암호화 또는 안전한 저장소 사용
- 프롬프트 임의 수정으로 품질 변동
  - 대응: 기본 프리셋 복원 옵션 제공
- todo 카테고리 탐색 실패(미존재/권한)
  - 대응: 실패 안내 및 수동 선택 옵션 고려

## 검증 계획
- 스레드/댓글 스코프 수집이 정확한지 수동 확인
- 프리셋별 결과 텍스트/액션(댓글 생성) 검증
- 설정 페이지에서 API 키 저장/수정/삭제 흐름 확인
- 검색 결과/당일 스레드 선별 분석 요청 동작 확인
