# 댓글 드래그 이동 개선 계획

## 배경/문제
- 현재 스레드 댓글/답글 이동은 위/아래 버튼으로만 가능해 조작이 번거롭다.
- 모바일에서는 버튼 기반 이동이 특히 불편하고, 원하는 위치로 직관적으로 옮기기 어렵다.

## 목표
- 댓글/답글을 마우스/터치 롱프레스 후 드래그로 이동할 수 있게 한다.
- 드래그 중에는 댓글 사이에 진한 위치 표시 줄이 나타나, 드롭 위치가 명확히 보이게 한다.
- 답글 이동 시에는 표시 줄이 더 짧아져 계층을 인지할 수 있게 한다.
- 기존 이동 버튼 UI는 제거한다.

## 범위
- 포함: 댓글/답글 이동 UI/UX 변경, 드래그 상태 표시, 이동 처리 로직 조정
- 제외: 서버 API 스키마 변경(필요 시 별도 합의), 댓글/답글 데이터 모델 구조 변경

## 현재 동작 정리
- 댓글 카드(`EntryCard`)에 위/아래 이동 버튼이 렌더링된다.
- 이동은 `moveEntry` API를 `direction: 'UP' | 'DOWN'`로 호출한다.
- 이동 가능 여부는 현재 위치와 부모-자식 순서로 판단한다.

## 개선 방향
- 이동 트리거를 버튼에서 롱프레스 + 드래그로 전환한다.
- 드래그 중 시각적 드롭 인디케이터(진한 줄)를 표시한다.
- 답글은 들여쓰기 수준에 맞춰 인디케이터 길이를 짧게 한다.
- 기존 이동 제약(최상단/최하단, 부모-자식 경계 등)을 유지한다.

## 단계별 계획
- 1단계: UI/상태 구조 설계
  - 드래그 시작/진행/종료 상태를 어디에서 관리할지 결정한다.
  - 댓글/답글 깊이별 인디케이터 스타일 규칙을 정의한다.
  - 완료 기준: 드래그 상태 모델과 인디케이터 렌더 위치가 명확히 정리됨.
- 2단계: 이동 버튼 제거 및 드래그 핸들링 추가
  - `EntryCard`의 이동 버튼 UI 제거.
  - 롱프레스 감지(마우스/터치) 후 드래그 시작 로직 추가.
  - 완료 기준: 버튼이 제거되고, 롱프레스로 드래그 모드 진입 가능.
- 3단계: 드롭 인디케이터 표시
  - 드래그 오버 위치에 진한 줄 표시.
  - 답글에는 짧은 줄 적용.
  - 완료 기준: 드래그 중 위치 표시가 의도대로 보임.
- 4단계: 이동 처리 연결
  - 드롭 위치에 따라 이동 대상/방향을 계산.
  - 현 API가 `UP/DOWN`만 지원하므로 필요한 경우 반복 호출 또는 대체 방식 설계.
  - 완료 기준: 드롭 후 실제 위치가 이동됨.
- 5단계: 마감 정리
  - 불필요한 i18n 문자열(이동 버튼 라벨) 정리.
  - 수동 검증 시나리오 수행.
  - 완료 기준: 기본 시나리오에서 회귀 없음.

## 리스크 및 대응
- API가 상/하 한 칸 이동만 지원할 경우 드래그 이동이 여러 호출로 느려질 수 있음.
  - 대응: 필요한 경우 서버에 위치 이동 API를 제안하거나, 클라이언트에서 단계 호출 최적화.
- 모바일 롱프레스가 스크롤과 충돌할 수 있음.
  - 대응: 롱프레스 임계 시간/이동 허용 범위를 조정하고, 드래그 중 스크롤 방지 처리.

## 검증 계획
- 수동 테스트
  - 댓글 롱프레스 후 드래그로 위/아래 이동되는지 확인.
  - 답글 롱프레스 드래그 시 인디케이터 길이가 짧게 표시되는지 확인.
  - 최상단/최하단 이동 제한이 정상 동작하는지 확인.
  - 모바일 터치에서 스크롤/드래그 충돌이 최소화되는지 확인.
