# 홈 카테고리 경로/텍스트영역 개선 계획

## 배경/문제
- 홈 화면에서 카테고리 목록이 새 스레드 작성 영역과 스레드 목록 상단에 중복 노출되어 시각적 반복이 발생함.
- 카테고리 필터가 쿼리 기반 URL로만 동작해 경로 기반 접근 요구를 만족하지 못함.
- 텍스트 영역 자동 확장이 현재 제한(픽셀 기준)으로 800px까지 확장되지 않음.
- 스레드 목록은 수동 "더 보기" 버튼으로 페이지를 불러옴.

## 목표
- 카테고리 관련 UI를 화면 최상단 섹션에서만 노출하도록 정리.
- 카테고리 필터를 경로 기반 URL로 지원(필요 시 기존 쿼리 접근은 호환 유지).
- 수정/새 스레드/댓글/답글 등 자동 확장 텍스트 영역의 최대 확장치를 800px로 설정.
- 스레드 카드 목록 로딩 방식은 유지(무한 스크롤 미적용).

## 범위
- 포함: 홈 화면 UI 재배치, 카테고리 URL 경로 파싱/생성 로직, 텍스트영역 자동 높이 계산.
- 제외: 백엔드 API 변경, 데이터 모델 변경, 아카이브 화면/관리자 화면의 목록 로딩 변경.

## 현재 동작 정리
- 홈 화면은 `HomeFeed`에서 새 스레드 작성 영역과 스레드 목록 상단에 카테고리 목록을 각각 렌더링함.
- 카테고리 선택 상태는 `useHomeFeedState`에서 URL 쿼리(`c`)로 관리됨.
- 자동 높이 텍스트 영역은 `useTextareaAutosize`에서 `maxHeight=240px` 기준으로 제한됨.
- 스레드 목록은 `useInfiniteQuery`를 사용하지만 "더 보기" 버튼으로만 다음 페이지를 호출함.

## 개선 방향
- 카테고리 UI는 상단 섹션으로 이동하여 중복 노출을 제거하고, 새 스레드/필터 기능은 해당 섹션에서 제공.
- 경로 기반 카테고리 URL을 표준으로 사용하고, 필요 시 기존 쿼리(`c`)는 자동 마이그레이션 또는 호환 처리.
- 자동 높이 계산은 픽셀 기반(800px)으로 제한되도록 적용.

## 단계별 계획
- 1단계: 카테고리 경로 규격 정의 및 파싱/생성 함수 추가
  - 변경: 홈 라우트에 경로 파라미터 추가, `useHomeFeedState`에서 경로 기반 카테고리 읽기/쓰기 처리.
  - 완료 기준: `/categories/{list}` 경로에서 카테고리 필터가 정상 적용되고, 토글 시 URL이 경로로 갱신됨.
- 2단계: 홈 카테고리 UI 재배치
  - 변경: 홈 상단에 카테고리 섹션을 만들고 기존 중복 노출을 제거.
  - 완료 기준: 카테고리 목록은 상단 섹션에서만 보이며, 스레드 수정 폼의 카테고리 UI는 유지됨.
- 3단계: 텍스트영역 자동 높이 800px 제한 적용
  - 변경: `useTextareaAutosize`에서 최대 높이 800px 적용.
  - 완료 기준: 새 글/수정/댓글/답글 텍스트 영역이 최대 800px까지 확장됨.
## 리스크 및 대응
- 경로/쿼리 병행 처리로 라우팅 중복이 생길 수 있음 → 경로 우선, 쿼리 자동 정리로 충돌 최소화.
- 자동 높이 계산이 픽셀 제한과 충돌할 수 있음 → 최대 높이만 조정하고 기존 자동 확장 흐름 유지.
## 검증 계획
- 홈에서 카테고리 토글 시 URL이 `/categories/...` 형태로 바뀌는지 확인.
- 기존 `?c=` 링크 접근 시 정상적으로 경로로 전환되거나 필터가 유지되는지 확인.
- 새 스레드 작성, 스레드 수정, 댓글/답글 입력에서 800px까지 확장되는지 확인.
- 스레드 목록은 기존 "더 보기" 버튼 방식이 유지되는지 확인.
